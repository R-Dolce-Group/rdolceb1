jQuery(document).ready(function(a){"use strict";function b(){a(".wc-product-documents-sections .wc-product-documents-section").each(function(b,c){a(".product-documents-section-position",c).val(parseInt(a(c).index(".wc-product-documents-sections .wc-product-documents-section"),10))})}function c(b){a(".wc-product-documents .wc-product-document",b).each(function(b,c){a(".wc-product-document-position",c).val(parseInt(a(c).index(".wc-product-documents .wc-product-document"),10))})}function d(){a("#wc-product-documents-data .wc-product-documents-set-file").live("click",function(b){return b.preventDefault(),f=a(b.target).closest("tr"),e?void e.open():(e=wp.media.frames.file_frame=wp.media({title:wc_product_documents_admin_params.select_file_text,button:{text:wc_product_documents_admin_params.set_file_text},multiple:!1}),e.on("select",function(){var b=e.state().get("selection").first().toJSON();a("input.wc-product-document-file-location",f).val(b.url)}),void e.open())})}a("#wc-product-documents-data .wc-metaboxes-wrapper").on("click",".expand_all",function(){return a(this).closest(".wc-metaboxes-wrapper").find(".wc-metabox > .wc-metabox-content").show(),!1}).on("click",".close_all",function(){return a(this).closest(".wc-metaboxes-wrapper").find(".wc-metabox > .wc-metabox-content").hide(),!1}),a("#wc-product-documents-data").on("click",".add-new-product-documents-section",function(){var c=-1;a(".wc-product-documents-sections .wc-product-documents-section .product-documents-section-index").each(function(){var b=parseInt(a(this).val(),10);c=b>c?b:c}),c++;var d=wc_product_documents_admin_params.new_section.replace(/{index}/g,c);return a(".wc-product-documents-sections").append(d),b(),!1}).on("click",".remove-wc-product-documents-section",function(){var c=confirm(wc_product_documents_admin_params.confirm_remove_section_text);if(c){var d=a(this).closest(".wc-product-documents-section");a(d).remove(),b()}return!1}).on("click","input.product-documents-default-section",function(){var b="true"===a(this).attr("previousValue");return a("#wc-product-documents-data input.product-documents-default-section").attr("previousValue",!1),b?a(this).removeAttr("checked"):a(this).attr("previousValue",a(this).is(":checked")),!0}),a("#wc-product-documents-data input.product-documents-default-section").each(function(){a(this).is(":checked")&&a(this).attr("previousValue",!0)}),a(".wc-product-documents-sections").sortable({items:".wc-product-documents-section",cursor:"move",axis:"y",handle:"h3",scrollSensitivity:40,helper:function(a,b){return b},start:function(a,b){b.item.css("border-style","dashed")},stop:function(a,c){c.item.removeAttr("style"),b()}}),a("#wc-product-documents-data").on("click",".wc-product-documents-add-document",function(){var b=a(this).closest(".wc-product-documents-section"),e=a(".product-documents-section-index",b).val(),f=-1;a(".wc-product-document .wc-product-document-sub-index",b).each(function(){var b=parseInt(a(this).val(),10);f=b>f?b:f}),f++;var g=wc_product_documents_admin_params.new_document.replace(/{index}/g,e).replace(/{sub_index}/g,f);return a(this).closest(".wc-product-documents").append(g),c(b),d(),!1}).on("click",".wc-product-documents-remove-document",function(){var b=confirm(wc_product_documents_admin_params.confirm_remove_document_text);if(b){var d=a(this).closest(".wc-product-documents-section"),e=a(this).closest(".wc-product-document");e.remove(),c(d)}return!1}),a("table.wc-product-documents tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,helper:function(a,b){return b},start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style"),c()}});var e,f;d()});